<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>login</title>
    <link href="css/login.css" rel="stylesheet">
</head>

<body>

<div id="loginDiv">
    <form action="/try2/loginServlet" method="post" id="form">
        <h1 id="loginMsg">LOGIN IN</h1>
        <div id="errorMsg"></div>
        <p>Username:<input id="username" name="username" type="text"></p>

        <p>Password:<input id="password" name="password" type="password"></p>

         <p>Role:
            <select name="role" id="role">
                <option value="student">Student</option>
                <option value="teacher">Teacher</option>
            </select>
        </p>
        <!-- 添加记住密码的复选框 -->
        <p>
            <input type="checkbox" id="rememberMe" value="1" name="rememberMe">
            <label for="rememberMe">Remember me</label>
        </p>
        <div id="subDiv">
            <input type="submit" class="button" value="login up">
            <input type="reset" class="button" value="reset">&nbsp;&nbsp;&nbsp;
            <a href="register.html">没有账号？点击注册</a>
        </div>
    </form>
</div>
<script>
    // 获取 URL 参数
    const urlParams = new URLSearchParams(window.location.search);
    const encodedLoginMsg = urlParams.get('login_msg');
    const loginMsg = decodeURIComponent(encodedLoginMsg);

    console.log('Error message from URL:', loginMsg); // 输出获取到的错误消息

    // 显示消息
    if (loginMsg) {
        document.getElementById('errorMsg').innerText = loginMsg;
    }
    document.addEventListener("DOMContentLoaded", function() {
        // 获取所有名为 'username' 的cookie
        var usernameCookies = document.cookie.split('; ').filter(function(c) {
            return c.startsWith('username=');
        });
        if (usernameCookies.length > 0) {
            var username = usernameCookies[0].split('=')[1];
            document.getElementById('username').textContent = username;
        }
    });
    document.addEventListener("DOMContentLoaded", function() {
        // 获取所有名为 'password' 的cookie
        var usernameCookies = document.cookie.split('; ').filter(function(c) {
            return c.startsWith('password=');
        });
        if (usernameCookies.length > 0) {
            var password = usernameCookies[0].split('=')[1];
            document.getElementById('password').textContent = password;
        }
    });

</script>


</body>
</html>